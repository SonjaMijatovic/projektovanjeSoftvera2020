{"ast":null,"code":"var _jsxFileName = \"/opt/lampp/htdocs/projektovanjeSoftvera2020/frontend/src/pages/admin/home/Home.js\";\nimport React from 'react';\nimport TablePage from \"../../../common/TablePage\";\nimport { deleteUser, getUsers, blockUser, unblockUser } from \"../../../services/admin/UserAdminService\";\nimport { bindActionCreators } from \"redux\";\nimport * as Actions from \"../../../actions/Actions\";\nimport { withRouter } from \"react-router-dom\";\nimport connect from \"react-redux/es/connect/connect\";\nimport strings from \"../../../localization\";\nimport { withSnackbar } from \"notistack\";\nimport { ListItemIcon, ListItemText, Menu, MenuItem, TableCell } from \"@material-ui/core\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport UndoIcon from '@material-ui/icons/Undo';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { getFeedbacks, getPublicFeedbacks, publishFeedback, unpublishFeedback } from '../../../services/FeedbackService';\n\nclass Home extends TablePage {\n  constructor(props) {\n    super(props);\n    this.tableDescription = [{\n      key: 'content',\n      label: \"Content\"\n    }];\n    this.state.showAdd = false;\n    this.state.showSearch = false;\n  }\n\n  fetchData() {\n    this.setState({\n      lockTable: true\n    });\n    getPublicFeedbacks({\n      page: this.state.searchData.page,\n      perPage: this.state.searchData.perPage,\n      search: this.state.searchData.search.toLowerCase()\n    }).then(response => {\n      if (!response.ok) {\n        return;\n      }\n\n      this.setState({\n        tableData: response.data.entities,\n        total: response.data.total,\n        lockTable: false\n      });\n    });\n  }\n\n  componentDidMount() {\n    this.fetchData();\n  }\n\n  getPageHeader() {\n    return /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 16\n      }\n    }, \"Feedbacks\");\n  }\n\n  renderAddContent() {\n    return '';\n  }\n\n  delete(item) {\n    this.setState({\n      lockTable: true\n    });\n    deleteUser(item.id).then(response => {\n      if (response && !response.ok) {\n        this.onFinish(null);\n        return;\n      }\n\n      this.props.enqueueSnackbar(strings.userList.userDelete, {\n        variant: 'success'\n      });\n      this.onFinish(item);\n      this.cancelDelete();\n      this.setState({\n        lockTable: false\n      });\n    });\n  }\n\n  handleBlock(item) {\n    publishFeedback(item.id).then(response => {\n      this.fetchData();\n    });\n  }\n\n  handleUnblock(item) {\n    unpublishFeedback(item.id).then(response => {\n      this.fetchData();\n    });\n  }\n\n  renderRowMenu(index, item) {\n    let ariaOwns = 'action-menu-' + index;\n    let userType = this.props.auth.user.userType;\n    console.log(userType);\n    return /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      \"aria-owns\": this.state.anchorEl ? ariaOwns : undefined,\n      \"aria-haspopup\": \"true\",\n      onClick: event => this.handleMenuClick(event, ariaOwns),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(MoreVert, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 21\n      }\n    })), ariaOwns === this.state.ariaOwns && /*#__PURE__*/React.createElement(Menu, {\n      id: ariaOwns,\n      anchorEl: this.state.anchorEl,\n      open: Boolean(this.state.anchorEl),\n      onClose: () => this.handleMenuClose(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 21\n      }\n    }, item.visible && userType == 'ADMIN' && /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: () => this.handleUnblock(item),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(ListItemIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(UndoIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 37\n      }\n    })), /*#__PURE__*/React.createElement(ListItemText, {\n      inset: true,\n      primary: \"Unpublish\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 33\n      }\n    })), !item.visible && userType == 'ADMIN' && /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: () => this.handleBlock(item),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(ListItemIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(UndoIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 37\n      }\n    })), /*#__PURE__*/React.createElement(ListItemText, {\n      inset: true,\n      primary: \"Publish\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 33\n      }\n    }))));\n  }\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    changeFullScreen: Actions.changeFullScreen\n  }, dispatch);\n}\n\nfunction mapStateToProps({\n  menuReducers,\n  authReducers\n}) {\n  return {\n    menu: menuReducers,\n    auth: authReducers\n  };\n}\n\nexport default withSnackbar(withRouter(connect(mapStateToProps, mapDispatchToProps)(Home)));","map":{"version":3,"sources":["/opt/lampp/htdocs/projektovanjeSoftvera2020/frontend/src/pages/admin/home/Home.js"],"names":["React","TablePage","deleteUser","getUsers","blockUser","unblockUser","bindActionCreators","Actions","withRouter","connect","strings","withSnackbar","ListItemIcon","ListItemText","Menu","MenuItem","TableCell","IconButton","MoreVert","UndoIcon","DeleteIcon","getFeedbacks","getPublicFeedbacks","publishFeedback","unpublishFeedback","Home","constructor","props","tableDescription","key","label","state","showAdd","showSearch","fetchData","setState","lockTable","page","searchData","perPage","search","toLowerCase","then","response","ok","tableData","data","entities","total","componentDidMount","getPageHeader","renderAddContent","delete","item","id","onFinish","enqueueSnackbar","userList","userDelete","variant","cancelDelete","handleBlock","handleUnblock","renderRowMenu","index","ariaOwns","userType","auth","user","console","log","anchorEl","undefined","event","handleMenuClick","Boolean","handleMenuClose","visible","mapDispatchToProps","dispatch","changeFullScreen","mapStateToProps","menuReducers","authReducers","menu"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,SAAP,MAAsB,2BAAtB;AACA,SAAQC,UAAR,EAAoBC,QAApB,EAA8BC,SAA9B,EAAyCC,WAAzC,QAA2D,0CAA3D;AACA,SAAQC,kBAAR,QAAiC,OAAjC;AACA,OAAO,KAAKC,OAAZ,MAAyB,0BAAzB;AACA,SAAQC,UAAR,QAAyB,kBAAzB;AACA,OAAOC,OAAP,MAAoB,gCAApB;AACA,OAAOC,OAAP,MAAoB,uBAApB;AACA,SAAQC,YAAR,QAA2B,WAA3B;AACA,SAAQC,YAAR,EAAsBC,YAAtB,EAAoCC,IAApC,EAA0CC,QAA1C,EAAoDC,SAApD,QAAoE,mBAApE;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,OAAOC,QAAP,MAAqB,6BAArB;AACA,OAAOC,QAAP,MAAqB,yBAArB;AACA,OAAOC,UAAP,MAAuB,2BAAvB;AACA,SAASC,YAAT,EAAuBC,kBAAvB,EAA2CC,eAA3C,EAA4DC,iBAA5D,QAAqF,mCAArF;;AAGA,MAAMC,IAAN,SAAmBxB,SAAnB,CAA6B;AAMzByB,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AADe,SAJnBC,gBAImB,GAJA,CACf;AAAEC,MAAAA,GAAG,EAAE,SAAP;AAAkBC,MAAAA,KAAK,EAAE;AAAzB,KADe,CAIA;AAGf,SAAKC,KAAL,CAAWC,OAAX,GAAqB,KAArB;AACA,SAAKD,KAAL,CAAWE,UAAX,GAAwB,KAAxB;AACH;;AAEDC,EAAAA,SAAS,GAAG;AAER,SAAKC,QAAL,CAAc;AACVC,MAAAA,SAAS,EAAE;AADD,KAAd;AAIAd,IAAAA,kBAAkB,CAAC;AACfe,MAAAA,IAAI,EAAE,KAAKN,KAAL,CAAWO,UAAX,CAAsBD,IADb;AAEfE,MAAAA,OAAO,EAAE,KAAKR,KAAL,CAAWO,UAAX,CAAsBC,OAFhB;AAGfC,MAAAA,MAAM,EAAE,KAAKT,KAAL,CAAWO,UAAX,CAAsBE,MAAtB,CAA6BC,WAA7B;AAHO,KAAD,CAAlB,CAIGC,IAJH,CAIQC,QAAQ,IAAI;AAEhB,UAAG,CAACA,QAAQ,CAACC,EAAb,EAAiB;AACb;AACH;;AAED,WAAKT,QAAL,CAAc;AACVU,QAAAA,SAAS,EAAEF,QAAQ,CAACG,IAAT,CAAcC,QADf;AAEVC,QAAAA,KAAK,EAAEL,QAAQ,CAACG,IAAT,CAAcE,KAFX;AAGVZ,QAAAA,SAAS,EAAE;AAHD,OAAd;AAKH,KAfD;AAgBH;;AAEDa,EAAAA,iBAAiB,GAAG;AAChB,SAAKf,SAAL;AACH;;AAEDgB,EAAAA,aAAa,GAAG;AACZ,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBAAP;AACH;;AAEDC,EAAAA,gBAAgB,GAAG;AACf,WAAO,EAAP;AACH;;AAEDC,EAAAA,MAAM,CAACC,IAAD,EAAO;AAET,SAAKlB,QAAL,CAAc;AACVC,MAAAA,SAAS,EAAE;AADD,KAAd;AAIAlC,IAAAA,UAAU,CAACmD,IAAI,CAACC,EAAN,CAAV,CAAoBZ,IAApB,CAAyBC,QAAQ,IAAI;AAEjC,UAAGA,QAAQ,IAAI,CAACA,QAAQ,CAACC,EAAzB,EAA6B;AACzB,aAAKW,QAAL,CAAc,IAAd;AACA;AACH;;AAED,WAAK5B,KAAL,CAAW6B,eAAX,CAA2B9C,OAAO,CAAC+C,QAAR,CAAiBC,UAA5C,EAAwD;AAAEC,QAAAA,OAAO,EAAE;AAAX,OAAxD;AAEA,WAAKJ,QAAL,CAAcF,IAAd;AACA,WAAKO,YAAL;AAEA,WAAKzB,QAAL,CAAc;AACVC,QAAAA,SAAS,EAAE;AADD,OAAd;AAGH,KAfD;AAgBH;;AAEDyB,EAAAA,WAAW,CAACR,IAAD,EAAO;AACd9B,IAAAA,eAAe,CAAC8B,IAAI,CAACC,EAAN,CAAf,CAAyBZ,IAAzB,CAA8BC,QAAQ,IAAI;AACtC,WAAKT,SAAL;AACH,KAFD;AAGH;;AAED4B,EAAAA,aAAa,CAACT,IAAD,EAAO;AAChB7B,IAAAA,iBAAiB,CAAC6B,IAAI,CAACC,EAAN,CAAjB,CAA2BZ,IAA3B,CAAgCC,QAAQ,IAAI;AACxC,WAAKT,SAAL;AACH,KAFD;AAGH;;AAED6B,EAAAA,aAAa,CAACC,KAAD,EAAQX,IAAR,EAAc;AAEvB,QAAIY,QAAQ,GAAG,iBAAiBD,KAAhC;AACA,QAAIE,QAAQ,GAAG,KAAKvC,KAAL,CAAWwC,IAAX,CAAgBC,IAAhB,CAAqBF,QAApC;AACAG,IAAAA,OAAO,CAACC,GAAR,CAAYJ,QAAZ;AAEA,wBACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,UAAD;AACI,mBAAY,KAAKnC,KAAL,CAAWwC,QAAX,GAAsBN,QAAtB,GAAiCO,SADjD;AAEI,uBAAc,MAFlB;AAGI,MAAA,OAAO,EAAIC,KAAD,IAAW,KAAKC,eAAL,CAAqBD,KAArB,EAA4BR,QAA5B,CAHzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALJ,CADJ,EASQA,QAAQ,KAAK,KAAKlC,KAAL,CAAWkC,QAAxB,iBACA,oBAAC,IAAD;AACI,MAAA,EAAE,EAAGA,QADT;AAEI,MAAA,QAAQ,EAAG,KAAKlC,KAAL,CAAWwC,QAF1B;AAGI,MAAA,IAAI,EAAGI,OAAO,CAAC,KAAK5C,KAAL,CAAWwC,QAAZ,CAHlB;AAII,MAAA,OAAO,EAAG,MAAM,KAAKK,eAAL,EAJpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAOQvB,IAAI,CAACwB,OAAL,IAAgBX,QAAQ,IAAI,OAA5B,iBACA,oBAAC,QAAD;AAAU,MAAA,OAAO,EAAG,MAAM,KAAKJ,aAAL,CAAmBT,IAAnB,CAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ,eAII,oBAAC,YAAD;AAAc,MAAA,KAAK,MAAnB;AAAoB,MAAA,OAAO,EAAC,WAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJJ,CARR,EAiBQ,CAACA,IAAI,CAACwB,OAAN,IAAiBX,QAAQ,IAAI,OAA7B,iBACA,oBAAC,QAAD;AAAU,MAAA,OAAO,EAAG,MAAM,KAAKL,WAAL,CAAiBR,IAAjB,CAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ,eAII,oBAAC,YAAD;AAAc,MAAA,KAAK,MAAnB;AAAoB,MAAA,OAAO,EAAC,SAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJJ,CAlBR,CAVR,CADJ;AA0CH;;AArIwB;;AAwI7B,SAASyB,kBAAT,CAA4BC,QAA5B,EACA;AACI,SAAOzE,kBAAkB,CAAC;AACtB0E,IAAAA,gBAAgB,EAAEzE,OAAO,CAACyE;AADJ,GAAD,EAEtBD,QAFsB,CAAzB;AAGH;;AAED,SAASE,eAAT,CAAyB;AAAEC,EAAAA,YAAF;AAAgBC,EAAAA;AAAhB,CAAzB,EACA;AACI,SAAO;AAAEC,IAAAA,IAAI,EAAEF,YAAR;AAAsBf,IAAAA,IAAI,EAAEgB;AAA5B,GAAP;AACH;;AAED,eAAexE,YAAY,CAACH,UAAU,CAACC,OAAO,CAACwE,eAAD,EAAkBH,kBAAlB,CAAP,CAA6CrD,IAA7C,CAAD,CAAX,CAA3B","sourcesContent":["import React from 'react'\nimport TablePage from \"../../../common/TablePage\";\nimport {deleteUser, getUsers, blockUser, unblockUser} from \"../../../services/admin/UserAdminService\";\nimport {bindActionCreators} from \"redux\";\nimport * as Actions from \"../../../actions/Actions\";\nimport {withRouter} from \"react-router-dom\";\nimport connect from \"react-redux/es/connect/connect\";\nimport strings from \"../../../localization\";\nimport {withSnackbar} from \"notistack\";\nimport {ListItemIcon, ListItemText, Menu, MenuItem, TableCell} from \"@material-ui/core\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport UndoIcon from '@material-ui/icons/Undo';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport { getFeedbacks, getPublicFeedbacks, publishFeedback, unpublishFeedback } from '../../../services/FeedbackService';\n\n\nclass Home extends TablePage {\n\n    tableDescription = [\n        { key: 'content', label: \"Content\" },\n    ];\n\n    constructor(props) {\n        super(props);\n\n        this.state.showAdd = false;\n        this.state.showSearch = false;\n    }\n\n    fetchData() {\n\n        this.setState({\n            lockTable: true\n        });\n\n        getPublicFeedbacks({\n            page: this.state.searchData.page,\n            perPage: this.state.searchData.perPage,\n            search: this.state.searchData.search.toLowerCase()\n        }).then(response => {\n\n            if(!response.ok) {\n                return;\n            }\n\n            this.setState({\n                tableData: response.data.entities,\n                total: response.data.total,\n                lockTable: false\n            });\n        });\n    }\n\n    componentDidMount() {\n        this.fetchData();\n    }\n\n    getPageHeader() {\n        return <h1>Feedbacks</h1>;\n    }\n\n    renderAddContent() {\n        return '';\n    }\n\n    delete(item) {\n\n        this.setState({\n            lockTable: true\n        });\n\n        deleteUser(item.id).then(response => {\n\n            if(response && !response.ok) {\n                this.onFinish(null);\n                return;\n            }\n\n            this.props.enqueueSnackbar(strings.userList.userDelete, { variant: 'success' });\n\n            this.onFinish(item);\n            this.cancelDelete();\n\n            this.setState({\n                lockTable: false\n            });\n        });\n    }\n\n    handleBlock(item) {\n        publishFeedback(item.id).then(response => {\n            this.fetchData();\n        })\n    }\n\n    handleUnblock(item) {\n        unpublishFeedback(item.id).then(response => {\n            this.fetchData();\n        });\n    }\n\n    renderRowMenu(index, item) {\n\n        let ariaOwns = 'action-menu-' + index;\n        let userType = this.props.auth.user.userType;\n        console.log(userType);\n\n        return(\n            <TableCell>\n                <IconButton\n                    aria-owns={ this.state.anchorEl ? ariaOwns : undefined }\n                    aria-haspopup=\"true\"\n                    onClick={ (event) => this.handleMenuClick(event, ariaOwns) }\n                >\n                    <MoreVert/>\n                </IconButton>\n                {\n                    ariaOwns === this.state.ariaOwns &&\n                    <Menu\n                        id={ ariaOwns }\n                        anchorEl={ this.state.anchorEl }\n                        open={ Boolean(this.state.anchorEl) }\n                        onClose={ () => this.handleMenuClose() }\n                    >\n                        {\n                            item.visible && userType == 'ADMIN' &&\n                            <MenuItem onClick={ () => this.handleUnblock(item) }>\n                                <ListItemIcon>\n                                    <UndoIcon/>\n                                </ListItemIcon>\n                                <ListItemText inset primary=\"Unpublish\"/>\n                            </MenuItem>\n                        }\n\n{\n                            !item.visible && userType == 'ADMIN' &&\n                            <MenuItem onClick={ () => this.handleBlock(item) }>\n                                <ListItemIcon>\n                                    <UndoIcon/>\n                                </ListItemIcon>\n                                <ListItemText inset primary=\"Publish\"/>\n                            </MenuItem>\n                        }\n\n                    </Menu>\n                }\n\n            </TableCell>\n        );\n    }\n}\n\nfunction mapDispatchToProps(dispatch)\n{\n    return bindActionCreators({\n        changeFullScreen: Actions.changeFullScreen\n    }, dispatch);\n}\n\nfunction mapStateToProps({ menuReducers, authReducers })\n{\n    return { menu: menuReducers, auth: authReducers };\n}\n\nexport default withSnackbar(withRouter(connect(mapStateToProps, mapDispatchToProps)(Home)));"]},"metadata":{},"sourceType":"module"}