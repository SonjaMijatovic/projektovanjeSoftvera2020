{"ast":null,"code":"var _jsxFileName = \"/Users/smijatovic/Documents/Projects/projektovanjeSoftvera2020/frontend/src/common/TablePage.js\";\nimport React from 'react';\nimport CONFIG from \"../config\";\nimport strings from \"../localization\";\nimport Page from \"./Page\";\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport EditIcon from '@material-ui/icons/Edit';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport AddIcon from '@material-ui/icons/Add';\nimport DoneIcon from '@material-ui/icons/Done';\nimport CloseIcon from '@material-ui/icons/Close';\nimport UndoIcon from '@material-ui/icons/Undo';\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport IconButton from '@material-ui/core/IconButton';\nimport { Button, Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Drawer, LinearProgress, ListItemIcon, ListItemText, Menu, MenuItem, Table, TableBody, TableCell, TableFooter, TableHead, TablePagination, TableRow, TextField } from \"@material-ui/core\";\nimport { dateTimeToString } from \"../util/DateUtil\";\nimport PageState from \"../constants/PageState\";\nimport DrawerWrapper from \"./DrawerWrapper\";\nimport moment from \"moment\";\n\nclass TablePage extends Page {\n  constructor(props) {\n    super(props);\n    this.tableDescription = [];\n    this.params = [{\n      name: 'search',\n      defaultValue: ''\n    }, {\n      name: 'page',\n      defaultValue: 0\n    }, {\n      name: 'perPage',\n      defaultValue: 30\n    }];\n    this.deletedField = 'deleted';\n    this.state = {\n      anchorEl: null,\n      lockTable: false,\n      ariaOwns: '',\n      showConfirmDialog: false,\n      itemForDelete: null,\n      data: {},\n      tableData: [],\n      total: 0,\n      selectedItem: undefined,\n      pageState: PageState.View,\n      showSearch: true,\n      showAdd: true,\n      showView: true,\n      showEdit: true,\n      showDelete: true\n    };\n    this.props.changeFullScreen(false);\n    this.handleChangePage = this.handleChangePage.bind(this);\n    this.handleChangeRowsPerPage = this.handleChangeRowsPerPage.bind(this);\n    this.searchChanged = this.searchChanged.bind(this);\n    this.onCancel = this.onCancel.bind(this);\n    this.onFinish = this.onFinish.bind(this);\n    this.cancelDelete = this.cancelDelete.bind(this);\n    this.delete = this.delete.bind(this);\n  }\n  /** HANDLERS **/\n\n\n  onCancel() {\n    this.setPageState(PageState.View);\n  }\n\n  onFinish(item, fetch = true) {\n    this.setState({\n      selectedItem: item,\n      pageState: PageState.View\n    });\n\n    if (!fetch) {\n      return;\n    }\n\n    setTimeout(() => {\n      this.fetchData();\n    }, 1000);\n  }\n\n  handleMenuClick(event, ariaOwns) {\n    this.setState({\n      anchorEl: event.currentTarget,\n      ariaOwns: ariaOwns\n    });\n  }\n\n  handleMenuClose() {\n    this.setState({\n      anchorEl: null,\n      ariaOwns: ''\n    });\n  }\n\n  handleChangePage(event, page) {\n    this.state.searchData.page = page + 1;\n    this.fetchData();\n  }\n\n  handleChangeRowsPerPage(event) {\n    this.state.searchData.perPage = event.target.value;\n    this.fetchData();\n  }\n\n  handleMenuView(item) {}\n\n  handleMenuEdit(item) {\n    this.state.selectedItem = item;\n    this.handleMenuClose();\n    this.setPageState(PageState.Edit);\n  }\n\n  handleMenuDelete(item) {\n    this.setState({\n      showConfirmDialog: true,\n      selectedItem: item,\n      anchorEl: null\n    });\n  }\n\n  delete(item) {}\n\n  handleRestore(item) {\n    this.setState({\n      selectedItem: item,\n      anchorEl: null\n    }, () => {\n      this.restore(item);\n    });\n  }\n\n  restore(item) {}\n\n  cancelDelete() {\n    this.setState({\n      showConfirmDialog: false,\n      selectedItem: null\n    });\n  }\n\n  searchChanged(event) {\n    let searchData = this.state.searchData;\n    searchData[event.target.name] = event.target.value;\n    this.setState({\n      searchData: searchData\n    });\n    this.fetchData();\n  }\n\n  selectRow(item) {\n    this.setState({\n      selectedItem: item\n    });\n  }\n\n  isRowSelected(item) {\n    return this.state.selectedItem && item.id === this.state.selectedItem.id;\n  }\n\n  showDrawer() {\n    return this.state.pageState !== PageState.View;\n  }\n\n  setPageState(state) {\n    this.setState({\n      pageState: state\n    });\n  }\n  /** RENDER TABLE  **/\n\n\n  renderRowMenu(index, item) {\n    let ariaOwns = 'action-menu-' + index;\n    return /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(IconButton, {\n      \"aria-owns\": this.state.anchorEl ? ariaOwns : undefined,\n      \"aria-haspopup\": \"true\",\n      onClick: event => this.handleMenuClick(event, ariaOwns),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(MoreVert, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 21\n      }\n    })), ariaOwns === this.state.ariaOwns && /*#__PURE__*/React.createElement(Menu, {\n      id: ariaOwns,\n      anchorEl: this.state.anchorEl,\n      open: Boolean(this.state.anchorEl),\n      onClose: () => this.handleMenuClose(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 21\n      }\n    }, this.state.showView && /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: () => this.handleMenuView(item),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(ListItemIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(VisibilityIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 37\n      }\n    })), /*#__PURE__*/React.createElement(ListItemText, {\n      inset: true,\n      primary: strings.table.view,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242,\n        columnNumber: 33\n      }\n    })), this.state.showEdit && /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: () => this.handleMenuEdit(item),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(ListItemIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(EditIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249,\n        columnNumber: 37\n      }\n    })), /*#__PURE__*/React.createElement(ListItemText, {\n      inset: true,\n      primary: strings.table.edit,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 33\n      }\n    })), !item[this.deletedField] && this.state.showDelete && /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: () => this.handleMenuDelete(item),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(ListItemIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(DeleteIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 37\n      }\n    })), /*#__PURE__*/React.createElement(ListItemText, {\n      inset: true,\n      primary: strings.table.delete,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 33\n      }\n    })), item[this.deletedField] && this.state.showDelete && /*#__PURE__*/React.createElement(MenuItem, {\n      onClick: () => this.handleRestore(item),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(ListItemIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(UndoIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 37\n      }\n    })), /*#__PURE__*/React.createElement(ListItemText, {\n      inset: true,\n      primary: strings.table.undo,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 33\n      }\n    }))));\n  }\n\n  renderTableRowData(item) {\n    let result = [];\n\n    for (let description of this.tableDescription) {\n      result.push( /*#__PURE__*/React.createElement(TableCell, {\n        key: 'table-data-' + description.key + '-' + result.length,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 17\n        }\n      }, description.transform !== undefined && this[description.transform](item[description.key]), description.transform === undefined && item[description.key]));\n    }\n\n    return result;\n  }\n\n  renderTableRow(data = []) {\n    let result = [];\n\n    for (let item of data) {\n      let className = 'table-row-' + result.length % 2;\n\n      if (this.isRowSelected(item)) {\n        className += ' selected';\n      }\n\n      result.push( /*#__PURE__*/React.createElement(TableRow, {\n        key: 'table-row-' + result.length,\n        className: className,\n        onClick: () => this.selectRow(item),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317,\n          columnNumber: 17\n        }\n      }, this.renderTableRowData(item), this.renderRowMenu(result.length, item)));\n    }\n\n    return /*#__PURE__*/React.createElement(TableBody, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 13\n      }\n    }, result);\n  }\n\n  renderTableHeader() {\n    let result = [];\n\n    for (let item of this.tableDescription) {\n      result.push( /*#__PURE__*/React.createElement(TableCell, {\n        key: 'table-header-' + result.length,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 17\n        }\n      }, item.label));\n    }\n\n    return /*#__PURE__*/React.createElement(TableHead, {\n      className: \"table-header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(TableRow, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 346,\n        columnNumber: 17\n      }\n    }, result, /*#__PURE__*/React.createElement(TableCell, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 21\n      }\n    }, strings.table.actions)));\n  }\n\n  renderTableFooter() {\n    return /*#__PURE__*/React.createElement(TableFooter, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(TableRow, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 360,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(TablePagination, {\n      count: this.state.total,\n      rowsPerPageOptions: CONFIG.rowsPerPage,\n      colSpan: this.tableDescription.length + 1,\n      page: this.state.searchData.page - 1,\n      rowsPerPage: this.state.searchData.perPage,\n      onChangePage: this.handleChangePage,\n      onChangeRowsPerPage: this.handleChangeRowsPerPage,\n      SelectProps: {\n        native: true\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 21\n      }\n    })));\n  }\n  /** RENDER TRANSFORMS */\n\n\n  renderColumnDeleted(value) {\n    return value ? /*#__PURE__*/React.createElement(DoneIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 24\n      }\n    }) : /*#__PURE__*/React.createElement(CloseIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 377,\n        columnNumber: 38\n      }\n    });\n  }\n\n  renderColumnDate(value) {\n    value = moment.utc(value).local();\n    return dateTimeToString(value);\n  }\n\n  renderTable(data) {\n    return /*#__PURE__*/React.createElement(Table, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 16\n      }\n    }, this.state.lockTable && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"lock-table\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(LinearProgress, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392,\n        columnNumber: 21\n      }\n    })), this.renderTableHeader(), this.renderTableRow(data), this.renderTableFooter());\n  }\n\n  renderAddContent() {\n    return '';\n  }\n\n  renderEditContent(item) {\n    return '';\n  }\n\n  renderDrawerContent() {\n    switch (this.state.pageState) {\n      case PageState.Add:\n        return this.renderAddContent();\n\n      case PageState.Edit:\n        return this.renderEditContent(this.state.selectedItem);\n\n      default:\n        return '';\n    }\n  }\n  /** RENDER DIALOG **/\n\n\n  renderDialog(title, text, cancel, deleteFunction) {\n    return /*#__PURE__*/React.createElement(Dialog, {\n      open: this.state.showConfirmDialog,\n      onClose: () => cancel(),\n      \"aria-labelledby\": \"draggable-dialog-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 426,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(DialogTitle, {\n      id: \"draggable-dialog-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 17\n      }\n    }, title), /*#__PURE__*/React.createElement(DialogContent, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(DialogContentText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 21\n      }\n    }, text)), /*#__PURE__*/React.createElement(DialogActions, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Button, {\n      onClick: () => cancel(),\n      color: \"primary\",\n      variant: \"contained\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 439,\n        columnNumber: 21\n      }\n    }, strings.table.no), /*#__PURE__*/React.createElement(Button, {\n      onClick: () => deleteFunction(this.state.selectedItem),\n      color: \"secondary\",\n      variant: \"contained\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 442,\n        columnNumber: 21\n      }\n    }, strings.table.yes)));\n  }\n\n  getPageHeader() {\n    return /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 16\n      }\n    }, \"Title\");\n  }\n\n  renderTableControls() {\n    return [/*#__PURE__*/React.createElement(IconButton, {\n      onClick: () => this.setPageState(PageState.Add),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 456,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(AddIcon, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 457,\n        columnNumber: 17\n      }\n    }))];\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Grid, {\n      id: \"table-page\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 465,\n        columnNumber: 13\n      }\n    }, this.renderDialog(strings.table.confirmDelete, 'To subscribe to this website, please enter your email address here. We will send\\n' + 'updates occasionally.', this.cancelDelete, this.delete), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 468,\n        columnNumber: 17\n      }\n    }, this.getPageHeader(), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"filter-controls\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 471,\n        columnNumber: 21\n      }\n    }, this.state.showSearch && /*#__PURE__*/React.createElement(TextField, {\n      label: strings.table.search,\n      type: \"search\",\n      name: \"search\",\n      value: this.state.searchData.search,\n      onChange: this.searchChanged,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 475,\n        columnNumber: 29\n      }\n    }), this.state.showAdd && this.renderTableControls())), /*#__PURE__*/React.createElement(Paper, {\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 490,\n        columnNumber: 17\n      }\n    }, this.renderTable(this.state.tableData)), /*#__PURE__*/React.createElement(Drawer, {\n      id: \"drawer\",\n      anchor: \"right\",\n      open: this.showDrawer(),\n      onClose: () => this.setPageState(PageState.View),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 494,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(DrawerWrapper, {\n      onBack: () => this.setPageState(PageState.View),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 495,\n        columnNumber: 21\n      }\n    }, this.renderDrawerContent())));\n  }\n\n}\n\nexport default TablePage;","map":{"version":3,"sources":["/Users/smijatovic/Documents/Projects/projektovanjeSoftvera2020/frontend/src/common/TablePage.js"],"names":["React","CONFIG","strings","Page","MoreVert","EditIcon","DeleteIcon","VisibilityIcon","AddIcon","DoneIcon","CloseIcon","UndoIcon","Grid","Paper","IconButton","Button","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","Drawer","LinearProgress","ListItemIcon","ListItemText","Menu","MenuItem","Table","TableBody","TableCell","TableFooter","TableHead","TablePagination","TableRow","TextField","dateTimeToString","PageState","DrawerWrapper","moment","TablePage","constructor","props","tableDescription","params","name","defaultValue","deletedField","state","anchorEl","lockTable","ariaOwns","showConfirmDialog","itemForDelete","data","tableData","total","selectedItem","undefined","pageState","View","showSearch","showAdd","showView","showEdit","showDelete","changeFullScreen","handleChangePage","bind","handleChangeRowsPerPage","searchChanged","onCancel","onFinish","cancelDelete","delete","setPageState","item","fetch","setState","setTimeout","fetchData","handleMenuClick","event","currentTarget","handleMenuClose","page","searchData","perPage","target","value","handleMenuView","handleMenuEdit","Edit","handleMenuDelete","handleRestore","restore","selectRow","isRowSelected","id","showDrawer","renderRowMenu","index","Boolean","table","view","edit","undo","renderTableRowData","result","description","push","key","length","transform","renderTableRow","className","renderTableHeader","label","actions","renderTableFooter","rowsPerPage","native","renderColumnDeleted","renderColumnDate","utc","local","renderTable","renderAddContent","renderEditContent","renderDrawerContent","Add","renderDialog","title","text","cancel","deleteFunction","no","yes","getPageHeader","renderTableControls","render","confirmDelete","search"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AAEA,OAAOC,OAAP,MAAoB,iBAApB;AACA,OAAOC,IAAP,MAAiB,QAAjB;AAEA,OAAOC,QAAP,MAAqB,6BAArB;AACA,OAAOC,QAAP,MAAqB,yBAArB;AACA,OAAOC,UAAP,MAAuB,2BAAvB;AACA,OAAOC,cAAP,MAA2B,+BAA3B;AACA,OAAOC,OAAP,MAAoB,wBAApB;AACA,OAAOC,QAAP,MAAqB,yBAArB;AACA,OAAOC,SAAP,MAAsB,0BAAtB;AACA,OAAOC,QAAP,MAAqB,yBAArB;AAEA,OAAOC,IAAP,MAAiB,wBAAjB;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,OAAOC,UAAP,MAAuB,8BAAvB;AACA,SACIC,MADJ,EAEIC,MAFJ,EAEYC,aAFZ,EAE2BC,aAF3B,EAE0CC,iBAF1C,EAE6DC,WAF7D,EAE0EC,MAF1E,EAEkFC,cAFlF,EAGIC,YAHJ,EAIIC,YAJJ,EAKIC,IALJ,EAMIC,QANJ,EAOIC,KAPJ,EAQIC,SARJ,EASIC,SATJ,EASeC,WATf,EAUIC,SAVJ,EAUeC,eAVf,EAWIC,QAXJ,EAWcC,SAXd,QAYO,mBAZP;AAaA,SAAQC,gBAAR,QAA+B,kBAA/B;AACA,OAAOC,SAAP,MAAsB,wBAAtB;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,OAAOC,MAAP,MAAmB,QAAnB;;AAEA,MAAMC,SAAN,SAAwBpC,IAAxB,CAA6B;AAYzBqC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;AADe,SAVnBC,gBAUmB,GAVD,EAUC;AAAA,SARnBC,MAQmB,GARV,CACL;AAAEC,MAAAA,IAAI,EAAE,QAAR;AAAkBC,MAAAA,YAAY,EAAE;AAAhC,KADK,EAEL;AAAED,MAAAA,IAAI,EAAE,MAAR;AAAgBC,MAAAA,YAAY,EAAE;AAA9B,KAFK,EAGL;AAAED,MAAAA,IAAI,EAAE,SAAR;AAAmBC,MAAAA,YAAY,EAAE;AAAjC,KAHK,CAQU;AAAA,SAFnBC,YAEmB,GAFJ,SAEI;AAGf,SAAKC,KAAL,GAAa;AAETC,MAAAA,QAAQ,EAAE,IAFD;AAGTC,MAAAA,SAAS,EAAE,KAHF;AAITC,MAAAA,QAAQ,EAAE,EAJD;AAKTC,MAAAA,iBAAiB,EAAE,KALV;AAMTC,MAAAA,aAAa,EAAE,IANN;AAOTC,MAAAA,IAAI,EAAE,EAPG;AAQTC,MAAAA,SAAS,EAAE,EARF;AASTC,MAAAA,KAAK,EAAE,CATE;AAUTC,MAAAA,YAAY,EAAEC,SAVL;AAWTC,MAAAA,SAAS,EAAEtB,SAAS,CAACuB,IAXZ;AAYTC,MAAAA,UAAU,EAAE,IAZH;AAaTC,MAAAA,OAAO,EAAE,IAbA;AAcTC,MAAAA,QAAQ,EAAE,IAdD;AAeTC,MAAAA,QAAQ,EAAE,IAfD;AAgBTC,MAAAA,UAAU,EAAE;AAhBH,KAAb;AAmBA,SAAKvB,KAAL,CAAWwB,gBAAX,CAA4B,KAA5B;AAEA,SAAKC,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBC,IAAtB,CAA2B,IAA3B,CAAxB;AACA,SAAKC,uBAAL,GAA+B,KAAKA,uBAAL,CAA6BD,IAA7B,CAAkC,IAAlC,CAA/B;AACA,SAAKE,aAAL,GAAqB,KAAKA,aAAL,CAAmBF,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKG,QAAL,GAAgB,KAAKA,QAAL,CAAcH,IAAd,CAAmB,IAAnB,CAAhB;AACA,SAAKI,QAAL,GAAgB,KAAKA,QAAL,CAAcJ,IAAd,CAAmB,IAAnB,CAAhB;AACA,SAAKK,YAAL,GAAoB,KAAKA,YAAL,CAAkBL,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKM,MAAL,GAAc,KAAKA,MAAL,CAAYN,IAAZ,CAAiB,IAAjB,CAAd;AACH;AAED;;;AAEAG,EAAAA,QAAQ,GAAG;AACP,SAAKI,YAAL,CAAkBtC,SAAS,CAACuB,IAA5B;AACH;;AAEDY,EAAAA,QAAQ,CAACI,IAAD,EAAOC,KAAK,GAAG,IAAf,EAAqB;AAEzB,SAAKC,QAAL,CAAc;AACVrB,MAAAA,YAAY,EAAEmB,IADJ;AAEVjB,MAAAA,SAAS,EAAEtB,SAAS,CAACuB;AAFX,KAAd;;AAKA,QAAG,CAACiB,KAAJ,EAAW;AACP;AACH;;AAEDE,IAAAA,UAAU,CAAC,MAAK;AACZ,WAAKC,SAAL;AACH,KAFS,EAEP,IAFO,CAAV;AAGH;;AAEDC,EAAAA,eAAe,CAACC,KAAD,EAAQ/B,QAAR,EAAkB;AAE7B,SAAK2B,QAAL,CAAc;AACV7B,MAAAA,QAAQ,EAAEiC,KAAK,CAACC,aADN;AAEVhC,MAAAA,QAAQ,EAAEA;AAFA,KAAd;AAIH;;AAEDiC,EAAAA,eAAe,GAAG;AACd,SAAKN,QAAL,CAAc;AACV7B,MAAAA,QAAQ,EAAE,IADA;AAEVE,MAAAA,QAAQ,EAAE;AAFA,KAAd;AAIH;;AAEDgB,EAAAA,gBAAgB,CAACe,KAAD,EAAQG,IAAR,EAAc;AAE1B,SAAKrC,KAAL,CAAWsC,UAAX,CAAsBD,IAAtB,GAA6BA,IAAI,GAAG,CAApC;AACA,SAAKL,SAAL;AACH;;AAEDX,EAAAA,uBAAuB,CAACa,KAAD,EAAQ;AAE3B,SAAKlC,KAAL,CAAWsC,UAAX,CAAsBC,OAAtB,GAAgCL,KAAK,CAACM,MAAN,CAAaC,KAA7C;AACA,SAAKT,SAAL;AACH;;AAEDU,EAAAA,cAAc,CAACd,IAAD,EAAO,CAEpB;;AAEDe,EAAAA,cAAc,CAACf,IAAD,EAAO;AAEjB,SAAK5B,KAAL,CAAWS,YAAX,GAA0BmB,IAA1B;AACA,SAAKQ,eAAL;AAEA,SAAKT,YAAL,CAAkBtC,SAAS,CAACuD,IAA5B;AACH;;AAEDC,EAAAA,gBAAgB,CAACjB,IAAD,EAAO;AAEnB,SAAKE,QAAL,CAAc;AACV1B,MAAAA,iBAAiB,EAAE,IADT;AAEVK,MAAAA,YAAY,EAAEmB,IAFJ;AAGV3B,MAAAA,QAAQ,EAAE;AAHA,KAAd;AAKH;;AAEDyB,EAAAA,MAAM,CAACE,IAAD,EAAO,CAEZ;;AAEDkB,EAAAA,aAAa,CAAClB,IAAD,EAAO;AAEhB,SAAKE,QAAL,CAAc;AACVrB,MAAAA,YAAY,EAAEmB,IADJ;AAEV3B,MAAAA,QAAQ,EAAE;AAFA,KAAd,EAGG,MAAM;AACL,WAAK8C,OAAL,CAAanB,IAAb;AACH,KALD;AAMH;;AAEDmB,EAAAA,OAAO,CAACnB,IAAD,EAAO,CAEb;;AAEDH,EAAAA,YAAY,GAAG;AACX,SAAKK,QAAL,CAAc;AACV1B,MAAAA,iBAAiB,EAAE,KADT;AAEVK,MAAAA,YAAY,EAAE;AAFJ,KAAd;AAIH;;AAEDa,EAAAA,aAAa,CAACY,KAAD,EAAQ;AAEjB,QAAII,UAAU,GAAG,KAAKtC,KAAL,CAAWsC,UAA5B;AAEAA,IAAAA,UAAU,CAACJ,KAAK,CAACM,MAAN,CAAa3C,IAAd,CAAV,GAAgCqC,KAAK,CAACM,MAAN,CAAaC,KAA7C;AAEA,SAAKX,QAAL,CAAc;AACVQ,MAAAA,UAAU,EAAEA;AADF,KAAd;AAIA,SAAKN,SAAL;AACH;;AAEDgB,EAAAA,SAAS,CAACpB,IAAD,EAAO;AAEZ,SAAKE,QAAL,CAAc;AACVrB,MAAAA,YAAY,EAAEmB;AADJ,KAAd;AAGH;;AAEDqB,EAAAA,aAAa,CAACrB,IAAD,EAAO;AAChB,WAAO,KAAK5B,KAAL,CAAWS,YAAX,IAA2BmB,IAAI,CAACsB,EAAL,KAAY,KAAKlD,KAAL,CAAWS,YAAX,CAAwByC,EAAtE;AACH;;AAEDC,EAAAA,UAAU,GAAG;AAET,WAAO,KAAKnD,KAAL,CAAWW,SAAX,KAAyBtB,SAAS,CAACuB,IAA1C;AACH;;AAEDe,EAAAA,YAAY,CAAC3B,KAAD,EAAQ;AAEhB,SAAK8B,QAAL,CAAc;AACVnB,MAAAA,SAAS,EAAEX;AADD,KAAd;AAGH;AAED;;;AAEAoD,EAAAA,aAAa,CAACC,KAAD,EAAQzB,IAAR,EAAc;AAEvB,QAAIzB,QAAQ,GAAG,iBAAiBkD,KAAhC;AAEA,wBACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,UAAD;AACI,mBAAY,KAAKrD,KAAL,CAAWC,QAAX,GAAsBE,QAAtB,GAAiCO,SADjD;AAEI,uBAAc,MAFlB;AAGI,MAAA,OAAO,EAAIwB,KAAD,IAAW,KAAKD,eAAL,CAAqBC,KAArB,EAA4B/B,QAA5B,CAHzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAKI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MALJ,CADJ,EASQA,QAAQ,KAAK,KAAKH,KAAL,CAAWG,QAAxB,iBACA,oBAAC,IAAD;AACI,MAAA,EAAE,EAAGA,QADT;AAEI,MAAA,QAAQ,EAAG,KAAKH,KAAL,CAAWC,QAF1B;AAGI,MAAA,IAAI,EAAGqD,OAAO,CAAC,KAAKtD,KAAL,CAAWC,QAAZ,CAHlB;AAII,MAAA,OAAO,EAAG,MAAM,KAAKmC,eAAL,EAJpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAOQ,KAAKpC,KAAL,CAAWe,QAAX,iBACA,oBAAC,QAAD;AAAU,MAAA,OAAO,EAAG,MAAM,KAAK2B,cAAL,CAAoBd,IAApB,CAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ,eAII,oBAAC,YAAD;AAAc,MAAA,KAAK,MAAnB;AAAoB,MAAA,OAAO,EAAGzE,OAAO,CAACoG,KAAR,CAAcC,IAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJJ,CARR,EAgBQ,KAAKxD,KAAL,CAAWgB,QAAX,iBACA,oBAAC,QAAD;AAAU,MAAA,OAAO,EAAG,MAAM,KAAK2B,cAAL,CAAoBf,IAApB,CAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ,eAII,oBAAC,YAAD;AAAc,MAAA,KAAK,MAAnB;AAAoB,MAAA,OAAO,EAAGzE,OAAO,CAACoG,KAAR,CAAcE,IAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJJ,CAjBR,EA0BQ,CAAC7B,IAAI,CAAC,KAAK7B,YAAN,CAAL,IAA4B,KAAKC,KAAL,CAAWiB,UAAvC,iBACA,oBAAC,QAAD;AAAU,MAAA,OAAO,EAAG,MAAM,KAAK4B,gBAAL,CAAsBjB,IAAtB,CAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ,eAII,oBAAC,YAAD;AAAc,MAAA,KAAK,MAAnB;AAAoB,MAAA,OAAO,EAAGzE,OAAO,CAACoG,KAAR,CAAc7B,MAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJJ,CA3BR,EAmCQE,IAAI,CAAC,KAAK7B,YAAN,CAAJ,IAA2B,KAAKC,KAAL,CAAWiB,UAAtC,iBACA,oBAAC,QAAD;AAAU,MAAA,OAAO,EAAG,MAAM,KAAK6B,aAAL,CAAmBlB,IAAnB,CAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,YAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ,eAII,oBAAC,YAAD;AAAc,MAAA,KAAK,MAAnB;AAAoB,MAAA,OAAO,EAAGzE,OAAO,CAACoG,KAAR,CAAcG,IAA5C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJJ,CApCR,CAVR,CADJ;AA4DH;;AAEDC,EAAAA,kBAAkB,CAAC/B,IAAD,EAAO;AAErB,QAAIgC,MAAM,GAAG,EAAb;;AAEA,SAAI,IAAIC,WAAR,IAAuB,KAAKlE,gBAA5B,EAA8C;AAE1CiE,MAAAA,MAAM,CAACE,IAAP,eACI,oBAAC,SAAD;AAAW,QAAA,GAAG,EAAG,gBAAgBD,WAAW,CAACE,GAA5B,GAAkC,GAAlC,GAAwCH,MAAM,CAACI,MAAhE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAEQH,WAAW,CAACI,SAAZ,KAA0BvD,SAA1B,IACA,KAAKmD,WAAW,CAACI,SAAjB,EAA4BrC,IAAI,CAACiC,WAAW,CAACE,GAAb,CAAhC,CAHR,EAMQF,WAAW,CAACI,SAAZ,KAA0BvD,SAA1B,IACAkB,IAAI,CAACiC,WAAW,CAACE,GAAb,CAPZ,CADJ;AAYH;;AAED,WAAOH,MAAP;AACH;;AAEDM,EAAAA,cAAc,CAAC5D,IAAI,GAAG,EAAR,EAAY;AAEtB,QAAIsD,MAAM,GAAG,EAAb;;AAEA,SAAI,IAAIhC,IAAR,IAAgBtB,IAAhB,EAAsB;AAElB,UAAI6D,SAAS,GAAG,eAAeP,MAAM,CAACI,MAAP,GAAgB,CAA/C;;AAEA,UAAG,KAAKf,aAAL,CAAmBrB,IAAnB,CAAH,EAA6B;AACzBuC,QAAAA,SAAS,IAAI,WAAb;AACH;;AAEDP,MAAAA,MAAM,CAACE,IAAP,eACI,oBAAC,QAAD;AAAU,QAAA,GAAG,EAAG,eAAeF,MAAM,CAACI,MAAtC;AAA+C,QAAA,SAAS,EAAGG,SAA3D;AAAuE,QAAA,OAAO,EAAG,MAAM,KAAKnB,SAAL,CAAepB,IAAf,CAAvF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACM,KAAK+B,kBAAL,CAAwB/B,IAAxB,CADN,EAEM,KAAKwB,aAAL,CAAmBQ,MAAM,CAACI,MAA1B,EAAkCpC,IAAlC,CAFN,CADJ;AAMH;;AAED,wBACI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACMgC,MADN,CADJ;AAKH;;AAEDQ,EAAAA,iBAAiB,GAAG;AAEhB,QAAIR,MAAM,GAAG,EAAb;;AAEA,SAAI,IAAIhC,IAAR,IAAgB,KAAKjC,gBAArB,EAAuC;AAEnCiE,MAAAA,MAAM,CAACE,IAAP,eACI,oBAAC,SAAD;AAAW,QAAA,GAAG,EAAG,kBAAkBF,MAAM,CAACI,MAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACMpC,IAAI,CAACyC,KADX,CADJ;AAKH;;AAED,wBACI,oBAAC,SAAD;AAAW,MAAA,SAAS,EAAC,cAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACMT,MADN,eAEI,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACMzG,OAAO,CAACoG,KAAR,CAAce,OADpB,CAFJ,CADJ,CADJ;AAUH;;AAEDC,EAAAA,iBAAiB,GAAG;AAEhB,wBACI,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,eAAD;AAAiB,MAAA,KAAK,EAAG,KAAKvE,KAAL,CAAWQ,KAApC;AAA4C,MAAA,kBAAkB,EAAGtD,MAAM,CAACsH,WAAxE;AACiB,MAAA,OAAO,EAAG,KAAK7E,gBAAL,CAAsBqE,MAAtB,GAA+B,CAD1D;AAC8D,MAAA,IAAI,EAAG,KAAKhE,KAAL,CAAWsC,UAAX,CAAsBD,IAAtB,GAA6B,CADlG;AACsG,MAAA,WAAW,EAAG,KAAKrC,KAAL,CAAWsC,UAAX,CAAsBC,OAD1I;AAEiB,MAAA,YAAY,EAAG,KAAKpB,gBAFrC;AAEwD,MAAA,mBAAmB,EAAG,KAAKE,uBAFnF;AAGiB,MAAA,WAAW,EAAE;AACToD,QAAAA,MAAM,EAAE;AADC,OAH9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADJ,CADJ;AAaH;AAED;;;AAEAC,EAAAA,mBAAmB,CAACjC,KAAD,EAAQ;AAEvB,WAAOA,KAAK,gBAAG,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAH,gBAAiB,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAA7B;AACH;;AAEDkC,EAAAA,gBAAgB,CAAClC,KAAD,EAAQ;AACpBA,IAAAA,KAAK,GAAGlD,MAAM,CAACqF,GAAP,CAAWnC,KAAX,EAAkBoC,KAAlB,EAAR;AACA,WAAOzF,gBAAgB,CAACqD,KAAD,CAAvB;AACH;;AAEDqC,EAAAA,WAAW,CAACxE,IAAD,EAAO;AAEd,wBAAO,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAGC,KAAKN,KAAL,CAAWE,SAAX,iBACA;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CAJD,EASD,KAAKkE,iBAAL,EATC,EAUD,KAAKF,cAAL,CAAoB5D,IAApB,CAVC,EAWD,KAAKiE,iBAAL,EAXC,CAAP;AAaH;;AAEDQ,EAAAA,gBAAgB,GAAG;AACf,WAAO,EAAP;AACH;;AAEDC,EAAAA,iBAAiB,CAACpD,IAAD,EAAO;AACpB,WAAO,EAAP;AACH;;AAEDqD,EAAAA,mBAAmB,GAAG;AAElB,YAAQ,KAAKjF,KAAL,CAAWW,SAAnB;AAEI,WAAKtB,SAAS,CAAC6F,GAAf;AAAoB,eAAO,KAAKH,gBAAL,EAAP;;AACpB,WAAK1F,SAAS,CAACuD,IAAf;AAAqB,eAAO,KAAKoC,iBAAL,CAAuB,KAAKhF,KAAL,CAAWS,YAAlC,CAAP;;AAErB;AAAS,eAAO,EAAP;AALb;AAOH;AAED;;;AAEA0E,EAAAA,YAAY,CAACC,KAAD,EAAQC,IAAR,EAAcC,MAAd,EAAsBC,cAAtB,EAAsC;AAE9C,wBACI,oBAAC,MAAD;AAAQ,MAAA,IAAI,EAAG,KAAKvF,KAAL,CAAWI,iBAA1B;AACQ,MAAA,OAAO,EAAG,MAAMkF,MAAM,EAD9B;AAEQ,yBAAgB,wBAFxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAII,oBAAC,WAAD;AAAa,MAAA,EAAE,EAAC,wBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACMF,KADN,CAJJ,eAOI,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,iBAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACMC,IADN,CADJ,CAPJ,eAYI,oBAAC,aAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAG,MAAMC,MAAM,EAA9B;AAAmC,MAAA,KAAK,EAAC,SAAzC;AAAmD,MAAA,OAAO,EAAC,WAA3D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACMnI,OAAO,CAACoG,KAAR,CAAciC,EADpB,CADJ,eAII,oBAAC,MAAD;AAAQ,MAAA,OAAO,EAAG,MAAMD,cAAc,CAAC,KAAKvF,KAAL,CAAWS,YAAZ,CAAtC;AAAkE,MAAA,KAAK,EAAC,WAAxE;AAAoF,MAAA,OAAO,EAAC,WAA5F;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACMtD,OAAO,CAACoG,KAAR,CAAckC,GADpB,CAJJ,CAZJ,CADJ;AAuBH;;AAEDC,EAAAA,aAAa,GAAG;AACZ,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAP;AACH;;AAEDC,EAAAA,mBAAmB,GAAG;AAClB,WAAO,cACH,oBAAC,UAAD;AAAY,MAAA,OAAO,EAAG,MAAM,KAAKhE,YAAL,CAAkBtC,SAAS,CAAC6F,GAA5B,CAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADJ,CADG,CAAP;AAKH;;AAEDU,EAAAA,MAAM,GAAG;AAEL,wBACI,oBAAC,IAAD;AAAM,MAAA,EAAE,EAAC,YAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACM,KAAKT,YAAL,CAAkBhI,OAAO,CAACoG,KAAR,CAAcsC,aAAhC,EAA+C,uFAC7C,uBADF,EAC2B,KAAKpE,YADhC,EAC8C,KAAKC,MADnD,CADN,eAGI;AAAK,MAAA,SAAS,EAAC,QAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACM,KAAKgE,aAAL,EADN,eAGI;AAAK,MAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAGQ,KAAK1F,KAAL,CAAWa,UAAX,iBACA,oBAAC,SAAD;AACI,MAAA,KAAK,EAAG1D,OAAO,CAACoG,KAAR,CAAcuC,MAD1B;AAEI,MAAA,IAAI,EAAC,QAFT;AAGI,MAAA,IAAI,EAAC,QAHT;AAII,MAAA,KAAK,EAAG,KAAK9F,KAAL,CAAWsC,UAAX,CAAsBwD,MAJlC;AAKI,MAAA,QAAQ,EAAG,KAAKxE,aALpB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAJR,EAcQ,KAAKtB,KAAL,CAAWc,OAAX,IACA,KAAK6E,mBAAL,EAfR,CAHJ,CAHJ,eAyBI,oBAAC,KAAD;AAAO,MAAA,EAAE,EAAE,EAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACM,KAAKb,WAAL,CAAiB,KAAK9E,KAAL,CAAWO,SAA5B,CADN,CAzBJ,eA6BI,oBAAC,MAAD;AAAQ,MAAA,EAAE,EAAC,QAAX;AAAoB,MAAA,MAAM,EAAC,OAA3B;AAAmC,MAAA,IAAI,EAAI,KAAK4C,UAAL,EAA3C;AAA+D,MAAA,OAAO,EAAG,MAAM,KAAKxB,YAAL,CAAkBtC,SAAS,CAACuB,IAA5B,CAA/E;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBACI,oBAAC,aAAD;AAAe,MAAA,MAAM,EAAG,MAAM,KAAKe,YAAL,CAAkBtC,SAAS,CAACuB,IAA5B,CAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACM,KAAKqE,mBAAL,EADN,CADJ,CA7BJ,CADJ;AAqCH;;AAhdwB;;AAmd7B,eAAezF,SAAf","sourcesContent":["import React from 'react'\nimport CONFIG from \"../config\";\n\nimport strings from \"../localization\";\nimport Page from \"./Page\";\n\nimport MoreVert from '@material-ui/icons/MoreVert';\nimport EditIcon from '@material-ui/icons/Edit';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport VisibilityIcon from '@material-ui/icons/Visibility';\nimport AddIcon from '@material-ui/icons/Add';\nimport DoneIcon from '@material-ui/icons/Done';\nimport CloseIcon from '@material-ui/icons/Close';\nimport UndoIcon from '@material-ui/icons/Undo';\n\nimport Grid from '@material-ui/core/Grid';\nimport Paper from '@material-ui/core/Paper';\nimport IconButton from '@material-ui/core/IconButton';\nimport {\n    Button,\n    Dialog, DialogActions, DialogContent, DialogContentText, DialogTitle, Drawer, LinearProgress,\n    ListItemIcon,\n    ListItemText,\n    Menu,\n    MenuItem,\n    Table,\n    TableBody,\n    TableCell, TableFooter,\n    TableHead, TablePagination,\n    TableRow, TextField\n} from \"@material-ui/core\";\nimport {dateTimeToString} from \"../util/DateUtil\";\nimport PageState from \"../constants/PageState\";\nimport DrawerWrapper from \"./DrawerWrapper\";\nimport moment from \"moment\";\n\nclass TablePage extends Page {\n\n    tableDescription= [];\n\n    params = [\n        { name: 'search', defaultValue: '' },\n        { name: 'page', defaultValue: 0 },\n        { name: 'perPage', defaultValue: 30 }\n    ];\n\n    deletedField = 'deleted';\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n\n            anchorEl: null,\n            lockTable: false,\n            ariaOwns: '',\n            showConfirmDialog: false,\n            itemForDelete: null,\n            data: {},\n            tableData: [],\n            total: 0,\n            selectedItem: undefined,\n            pageState: PageState.View,\n            showSearch: true,\n            showAdd: true,\n            showView: true,\n            showEdit: true,\n            showDelete: true\n        };\n\n        this.props.changeFullScreen(false);\n\n        this.handleChangePage = this.handleChangePage.bind(this);\n        this.handleChangeRowsPerPage = this.handleChangeRowsPerPage.bind(this);\n        this.searchChanged = this.searchChanged.bind(this);\n        this.onCancel = this.onCancel.bind(this);\n        this.onFinish = this.onFinish.bind(this);\n        this.cancelDelete = this.cancelDelete.bind(this);\n        this.delete = this.delete.bind(this);\n    }\n\n    /** HANDLERS **/\n\n    onCancel() {\n        this.setPageState(PageState.View);\n    }\n\n    onFinish(item, fetch = true) {\n\n        this.setState({\n            selectedItem: item,\n            pageState: PageState.View\n        });\n\n        if(!fetch) {\n            return;\n        }\n\n        setTimeout(()=> {\n            this.fetchData()\n        }, 1000);\n    }\n\n    handleMenuClick(event, ariaOwns) {\n\n        this.setState({\n            anchorEl: event.currentTarget,\n            ariaOwns: ariaOwns\n        });\n    }\n\n    handleMenuClose() {\n        this.setState({\n            anchorEl: null,\n            ariaOwns: ''\n        });\n    }\n\n    handleChangePage(event, page) {\n\n        this.state.searchData.page = page + 1;\n        this.fetchData();\n    }\n\n    handleChangeRowsPerPage(event) {\n\n        this.state.searchData.perPage = event.target.value;\n        this.fetchData();\n    }\n\n    handleMenuView(item) {\n\n    }\n\n    handleMenuEdit(item) {\n\n        this.state.selectedItem = item;\n        this.handleMenuClose();\n\n        this.setPageState(PageState.Edit);\n    }\n\n    handleMenuDelete(item) {\n\n        this.setState({\n            showConfirmDialog: true,\n            selectedItem: item,\n            anchorEl: null\n        });\n    }\n\n    delete(item) {\n\n    }\n\n    handleRestore(item) {\n\n        this.setState({\n            selectedItem: item,\n            anchorEl: null\n        }, () => {\n            this.restore(item);\n        });\n    }\n\n    restore(item) {\n\n    }\n\n    cancelDelete() {\n        this.setState({\n            showConfirmDialog: false,\n            selectedItem: null\n        });\n    }\n\n    searchChanged(event) {\n\n        let searchData = this.state.searchData;\n\n        searchData[event.target.name] = event.target.value;\n\n        this.setState({\n            searchData: searchData\n        });\n\n        this.fetchData();\n    }\n\n    selectRow(item) {\n\n        this.setState({\n            selectedItem: item\n        });\n    }\n\n    isRowSelected(item) {\n        return this.state.selectedItem && item.id === this.state.selectedItem.id;\n    }\n\n    showDrawer() {\n\n        return this.state.pageState !== PageState.View\n    }\n\n    setPageState(state) {\n\n        this.setState({\n            pageState: state\n        });\n    }\n\n    /** RENDER TABLE  **/\n\n    renderRowMenu(index, item) {\n\n        let ariaOwns = 'action-menu-' + index;\n\n        return(\n            <TableCell>\n                <IconButton\n                    aria-owns={ this.state.anchorEl ? ariaOwns : undefined }\n                    aria-haspopup=\"true\"\n                    onClick={ (event) => this.handleMenuClick(event, ariaOwns) }\n                >\n                    <MoreVert/>\n                </IconButton>\n                {\n                    ariaOwns === this.state.ariaOwns &&\n                    <Menu\n                        id={ ariaOwns }\n                        anchorEl={ this.state.anchorEl }\n                        open={ Boolean(this.state.anchorEl) }\n                        onClose={ () => this.handleMenuClose() }\n                    >\n                        {\n                            this.state.showView &&\n                            <MenuItem onClick={ () => this.handleMenuView(item) }>\n                                <ListItemIcon>\n                                    <VisibilityIcon/>\n                                </ListItemIcon>\n                                <ListItemText inset primary={ strings.table.view }/>\n                            </MenuItem>\n                        }\n                        {\n                            this.state.showEdit &&\n                            <MenuItem onClick={ () => this.handleMenuEdit(item) }>\n                                <ListItemIcon>\n                                    <EditIcon/>\n                                </ListItemIcon>\n                                <ListItemText inset primary={ strings.table.edit }/>\n                            </MenuItem>\n                        }\n\n                        {\n                            !item[this.deletedField] && this.state.showDelete &&\n                            <MenuItem onClick={ () => this.handleMenuDelete(item) }>\n                                <ListItemIcon>\n                                    <DeleteIcon/>\n                                </ListItemIcon>\n                                <ListItemText inset primary={ strings.table.delete }/>\n                            </MenuItem>\n                        }\n                        {\n                            item[this.deletedField] && this.state.showDelete &&\n                            <MenuItem onClick={ () => this.handleRestore(item) }>\n                                <ListItemIcon>\n                                    <UndoIcon/>\n                                </ListItemIcon>\n                                <ListItemText inset primary={ strings.table.undo }/>\n                            </MenuItem>\n                        }\n\n                    </Menu>\n                }\n\n            </TableCell>\n        );\n    }\n\n    renderTableRowData(item) {\n\n        let result = [];\n\n        for(let description of this.tableDescription) {\n\n            result.push(\n                <TableCell key={ 'table-data-' + description.key + '-' + result.length }>\n                    {\n                        description.transform !== undefined &&\n                        this[description.transform](item[description.key])\n                    }\n                    {\n                        description.transform === undefined &&\n                        item[description.key]\n                    }\n                </TableCell>\n            );\n        }\n\n        return result;\n    }\n\n    renderTableRow(data = []) {\n\n        let result = [];\n\n        for(let item of data) {\n\n            let className = 'table-row-' + result.length % 2;\n\n            if(this.isRowSelected(item)) {\n                className += ' selected';\n            }\n\n            result.push(\n                <TableRow key={ 'table-row-' + result.length } className={ className } onClick={ () => this.selectRow(item) }>\n                    { this.renderTableRowData(item) }\n                    { this.renderRowMenu(result.length, item) }\n                </TableRow>\n            )\n        }\n\n        return (\n            <TableBody>\n                { result }\n            </TableBody>\n        );\n    }\n\n    renderTableHeader() {\n\n        let result = [];\n\n        for(let item of this.tableDescription) {\n\n            result.push(\n                <TableCell key={ 'table-header-' + result.length }>\n                    { item.label }\n                </TableCell>\n            )\n        }\n\n        return (\n            <TableHead className='table-header'>\n                <TableRow>\n                    { result }\n                    <TableCell>\n                        { strings.table.actions }\n                    </TableCell>\n                </TableRow>\n            </TableHead>\n        );\n    }\n\n    renderTableFooter() {\n\n        return (\n            <TableFooter>\n                <TableRow>\n                    <TablePagination count={ this.state.total } rowsPerPageOptions={ CONFIG.rowsPerPage }\n                                     colSpan={ this.tableDescription.length + 1 } page={ this.state.searchData.page - 1 } rowsPerPage={ this.state.searchData.perPage }\n                                     onChangePage={ this.handleChangePage } onChangeRowsPerPage={ this.handleChangeRowsPerPage }\n                                     SelectProps={{\n                                         native: true,\n                                     }}\n                    />\n                </TableRow>\n            </TableFooter>\n        );\n    }\n\n    /** RENDER TRANSFORMS */\n\n    renderColumnDeleted(value) {\n\n        return value ? <DoneIcon/> : <CloseIcon/>;\n    }\n\n    renderColumnDate(value) {\n        value = moment.utc(value).local();\n        return dateTimeToString(value);\n    }\n\n    renderTable(data) {\n\n        return <Table>\n\n            {\n                this.state.lockTable &&\n                <div className='lock-table'>\n                    <LinearProgress/>\n                </div>\n            }\n\n            { this.renderTableHeader() }\n            { this.renderTableRow(data) }\n            { this.renderTableFooter() }\n        </Table>\n    }\n\n    renderAddContent() {\n        return ''\n    }\n\n    renderEditContent(item) {\n        return ''\n    }\n\n    renderDrawerContent() {\n\n        switch (this.state.pageState) {\n\n            case PageState.Add: return this.renderAddContent();\n            case PageState.Edit: return this.renderEditContent(this.state.selectedItem);\n\n            default: return '';\n        }\n    }\n\n    /** RENDER DIALOG **/\n\n    renderDialog(title, text, cancel, deleteFunction) {\n\n        return (\n            <Dialog open={ this.state.showConfirmDialog }\n                    onClose={ () => cancel() }\n                    aria-labelledby='draggable-dialog-title'\n            >\n                <DialogTitle id='draggable-dialog-title'>\n                    { title }\n                </DialogTitle>\n                <DialogContent>\n                    <DialogContentText>\n                        { text }\n                    </DialogContentText>\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={ () => cancel() } color='primary' variant=\"contained\">\n                        { strings.table.no }\n                    </Button>\n                    <Button onClick={ () => deleteFunction(this.state.selectedItem) } color='secondary' variant=\"contained\">\n                        { strings.table.yes }\n                    </Button>\n                </DialogActions>\n            </Dialog>\n        );\n    }\n\n    getPageHeader() {\n        return <h1>Title</h1>;\n    }\n\n    renderTableControls() {\n        return [\n            <IconButton onClick={ () => this.setPageState(PageState.Add) }>\n                <AddIcon/>\n            </IconButton>\n        ]\n    }\n\n    render() {\n\n        return (\n            <Grid id='table-page'>\n                { this.renderDialog(strings.table.confirmDelete, 'To subscribe to this website, please enter your email address here. We will send\\n' +\n                    'updates occasionally.', this.cancelDelete, this.delete) }\n                <div className='header'>\n                    { this.getPageHeader() }\n\n                    <div className='filter-controls'>\n\n                        {\n                            this.state.showSearch &&\n                            <TextField\n                                label={ strings.table.search }\n                                type=\"search\"\n                                name='search'\n                                value={ this.state.searchData.search }\n                                onChange={ this.searchChanged }\n                            />\n                        }\n\n                        {\n                            this.state.showAdd &&\n                            this.renderTableControls()\n                        }\n                    </div>\n                </div>\n                <Paper md={12}>\n                    { this.renderTable(this.state.tableData) }\n                </Paper>\n\n                <Drawer id='drawer' anchor='right' open={  this.showDrawer() } onClose={ () => this.setPageState(PageState.View) } >\n                    <DrawerWrapper onBack={ () => this.setPageState(PageState.View) }>\n                        { this.renderDrawerContent() }\n                    </DrawerWrapper>\n                </Drawer>\n            </Grid>\n        );\n    }\n}\n\nexport default TablePage;\n"]},"metadata":{},"sourceType":"module"}