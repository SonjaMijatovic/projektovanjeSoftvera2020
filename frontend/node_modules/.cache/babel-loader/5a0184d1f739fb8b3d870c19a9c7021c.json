{"ast":null,"code":"var _jsxFileName = \"/Users/smijatovic/Documents/Projects/projektovanjeSoftvera2020/frontend/src/pages/admin/users/AddUser.js\";\nimport React from 'react';\nimport { bindActionCreators } from \"redux\";\nimport * as Actions from \"../../../actions/Actions\";\nimport { withRouter } from \"react-router-dom\";\nimport connect from \"react-redux/es/connect/connect\";\nimport Grid from '@material-ui/core/Grid';\nimport { Paper } from \"@material-ui/core\";\nimport strings from \"../../../localization\";\nimport Validators from \"../../../constants/ValidatorTypes\";\nimport FormComponent from \"../../../common/FormComponent\";\nimport UserForm from \"../../../components/forms/admin/user/UserForm\";\nimport { addUser } from \"../../../services/admin/UserAdminService\";\nimport { withSnackbar } from \"notistack\";\n\nclass AddUser extends FormComponent {\n  constructor(props) {\n    super(props);\n    this.validationList = {\n      email: [{\n        type: Validators.EMAIL\n      }],\n      firstName: [{\n        type: Validators.REQUIRED\n      }],\n      lastName: [{\n        type: Validators.REQUIRED\n      }]\n    };\n    this.state = {\n      data: props.data ? props.data : {},\n      errors: {}\n    };\n    this.props.changeFullScreen(false);\n    this.submit = this.submit.bind(this);\n  }\n\n  submit() {\n    if (!this.validate()) {\n      return;\n    }\n\n    this.showDrawerLoader();\n    let data = {\n      email: this.state.data.email,\n      firstName: this.state.data.firstName,\n      lastName: this.state.data.lastName,\n      password: this.state.data.password,\n      userType: this.state.data.userType ? this.state.data.userType.value : '',\n      doctorType: this.state.data.doctorType ? {\n        id: this.state.data.doctorType.id\n      } : null\n    };\n    addUser(data).then(response => {\n      if (!response.ok) {\n        this.props.onFinish(null);\n        this.props.enqueueSnackbar(strings.addUser.errorAddingUser, {\n          variant: 'error'\n        });\n        return;\n      }\n\n      this.props.enqueueSnackbar(strings.addUser.userAdded, {\n        variant: 'success'\n      });\n      this.props.onFinish(response.data.user);\n      this.hideDrawerLoader();\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Grid, {\n      id: \"page\",\n      item: true,\n      md: 12,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"header\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 21\n      }\n    }, strings.addUser.pageTitle)), /*#__PURE__*/React.createElement(Paper, {\n      className: \"paper\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(UserForm, {\n      doctoreTypes: this.props.doctoreTypes,\n      onChange: this.changeData,\n      onSubmit: this.submit,\n      data: this.state.data,\n      errors: this.state.errors,\n      onCancel: this.props.onCancel,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 21\n      }\n    })));\n  }\n\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({\n    changeFullScreen: Actions.changeFullScreen\n  }, dispatch);\n}\n\nfunction mapStateToProps({\n  menuReducers,\n  siteDataReducers\n}) {\n  return {\n    menu: menuReducers,\n    siteData: siteDataReducers\n  };\n}\n\nexport default withSnackbar(withRouter(connect(mapStateToProps, mapDispatchToProps)(AddUser)));","map":{"version":3,"sources":["/Users/smijatovic/Documents/Projects/projektovanjeSoftvera2020/frontend/src/pages/admin/users/AddUser.js"],"names":["React","bindActionCreators","Actions","withRouter","connect","Grid","Paper","strings","Validators","FormComponent","UserForm","addUser","withSnackbar","AddUser","constructor","props","validationList","email","type","EMAIL","firstName","REQUIRED","lastName","state","data","errors","changeFullScreen","submit","bind","validate","showDrawerLoader","password","userType","value","doctorType","id","then","response","ok","onFinish","enqueueSnackbar","errorAddingUser","variant","userAdded","user","hideDrawerLoader","render","pageTitle","doctoreTypes","changeData","onCancel","mapDispatchToProps","dispatch","mapStateToProps","menuReducers","siteDataReducers","menu","siteData"],"mappings":"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","sourcesContent":["import React from 'react'\nimport {bindActionCreators} from \"redux\";\nimport * as Actions from \"../../../actions/Actions\";\nimport {withRouter} from \"react-router-dom\";\nimport connect from \"react-redux/es/connect/connect\";\nimport Grid from '@material-ui/core/Grid';\nimport {Paper} from \"@material-ui/core\";\nimport strings from \"../../../localization\";\nimport Validators from \"../../../constants/ValidatorTypes\";\nimport FormComponent from \"../../../common/FormComponent\";\nimport UserForm from \"../../../components/forms/admin/user/UserForm\";\nimport {addUser} from \"../../../services/admin/UserAdminService\";\nimport {withSnackbar} from \"notistack\";\n\nclass AddUser extends FormComponent {\n\n    validationList = {\n        email: [ {type: Validators.EMAIL } ],\n        firstName: [ {type: Validators.REQUIRED } ],\n        lastName: [ {type: Validators.REQUIRED } ]\n    };\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            data: props.data ? props.data : {},\n            errors: {}\n        };\n\n        this.props.changeFullScreen(false);\n\n        this.submit = this.submit.bind(this);\n    }\n\n    submit() {\n\n        if(!this.validate()) {\n            return;\n        }\n\n        this.showDrawerLoader();\n\n        let data = {\n            email: this.state.data.email,\n            firstName: this.state.data.firstName,\n            lastName: this.state.data.lastName,\n            password: this.state.data.password,\n            userType: this.state.data.userType ? this.state.data.userType.value : '',\n            doctorType:  this.state.data.doctorType ? { id: this.state.data.doctorType.id} : null\n        }\n\n        addUser(data).then(response => {\n\n            if(!response.ok) {\n                this.props.onFinish(null);\n                this.props.enqueueSnackbar(strings.addUser.errorAddingUser, { variant: 'error' });\n                return;\n            }\n\n            this.props.enqueueSnackbar(strings.addUser.userAdded, { variant: 'success' });\n            this.props.onFinish(response.data.user);\n\n            this.hideDrawerLoader();\n        });\n    }\n\n    render() {\n\n        return (\n            <Grid id='page' item md={ 12 }>\n\n                <div className='header'>\n                    <h1>{ strings.addUser.pageTitle }</h1>\n                </div>\n\n                <Paper className='paper'>\n                    <UserForm doctoreTypes={ this.props.doctoreTypes } onChange={ this.changeData } onSubmit={ this.submit }\n                                data={ this.state.data } errors={ this.state.errors } onCancel={ this.props.onCancel }/>\n                </Paper>\n\n            </Grid>\n\n        );\n    }\n}\n\n\nfunction mapDispatchToProps(dispatch)\n{\n    return bindActionCreators({\n        changeFullScreen: Actions.changeFullScreen\n    }, dispatch);\n}\n\nfunction mapStateToProps({ menuReducers, siteDataReducers })\n{\n    return { menu: menuReducers, siteData: siteDataReducers };\n}\n\nexport default withSnackbar(withRouter(connect(mapStateToProps, mapDispatchToProps)(AddUser)));"]},"metadata":{},"sourceType":"module"}